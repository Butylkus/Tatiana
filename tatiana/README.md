# Татьяна
Представьте себе не минуту, что в вашем доме завелась женщина, которая по вашей команде или по расписанию включает и выключает различные электроприборы.

Знакомьтесь - Татьяна!

Простой и понятный программно-аппаратный центр для системы "Умный дом". Скрипт умеет работать с модулями реле, кнопками и даже через web-интерфейс (в разработке).

На платформе Raspberry Pi 2 и выше поддверживает до 26 устройств. Этого достаточно для управления освещением в трёхкномнатной квартире, например (13 ламп и 13 кнопок). Может включать и выключать питание устройств по расписанию (водонагреватель, например).

И вообще скрипт няшка =)

Правовая основа
----
Это программный продукт, предназначенный для использования и самостоятельной модификации всеми желающими того членами OpenSource-сообщества.

Идея и базовая реализация: [Алексей Бутылкус](https://vk.com/butpub)
                                             
Веб-интерфейс*: Александр Шнуров
*Обкатывается и будет доступен в скором времени!

Как это работает
----
Данный скрипт предназначен для включения и выключения определённых контактов GPIO по плану и/или внешнему сигналу ("железная" кнопка, программный интерфейс, Etc).
Файлы статусов и планов используются вместо СУБД, чтобы не загружать и без того не самый мощный процессор лишним демоном.
Статус-файлы лучше не переименовывать, создавать руками не нужно, они создаются автоматически при задействовании соответствующего пина в программе.
Файлы планов можно называть как угодно для персонального удобства и донастройки в собственной системе (в размножаемом блоке планировщика просто указать правильные имена).

В идеале лучше бы использовать именно СУБД для интеграции с другими скриптами, например, фронтендом на PHP.

Установка, первичная настройка, автономизация
----
Для установки необходимо сделать несколько простых шагов. Приведён пример для путей по умолчанию, их можно менять по своему усмотрению
    1. mkdir /home/pi/.tatiana
    2. mkdir /home/pi/.tatiana/status
    3. mkdir /home/pi/.tatiana/plans
    4. chown -R pi:pi /home/pi/.tatiana
    5. chmod -R +777 /home/pi/.tatiana
Или просто скопировать каталог .tatiana из репозитория (полученный командой git clone) в домашний каталог пользователя pi.

Чтобы скрипт запускался автоматически при старте системы и висел как служба в системе (и не прерывался при разлогине, например), нужно сделать:
    6. Добавить полный путь к скрипту в файл /etc/rc.local перед "exit 0"

Включение и выключение устройств по расписанию
----
Каждый выходной пин может работать не только по нажатию кнопки, но и по плану. По умолчанию планы должны находиться в /home/pi/.tatiana/plans/*
План всего один, имеет вполне очевидный синтаксис:
ПИН>включение<выключение

18>08:00:18<00:00:18
27>09:00:27<07:00:27
22>01:45:22<02:00:22
27>02:00:22<07:00:27
17>01:58:17<01:59:00
%NEWLINE%

Последняя строка зарезервирована и должна присутствовать ВСЕГДА! Она будет использоваться в веб-интерфейсе для удобного управления планами.
